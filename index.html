<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="static/css/index.css">
</head>
<body class="tutto" id="listener">

    <form action="" method="get">
        <h1 class="titolo" ><b>INDOVINA IL NUMERO</b></h1>
        
        <div class="liste">
            <div class="lista">  
                <ol>
                    <li>Il computer sceglierà segretamente un numero intero casuale tra 1 e <br>100.</li>

                    <li>Il tuo obiettivo è indovinare questo numero segreto nel minor numero<br> di tentativi possibile.</li>

                    <li>Ad ogni tentativo, inserisci un numero e il computer ti darà un indizio:</li>
                        
                </ol>

                <ul>
                    <li>Se il tuo numero è troppo basso, ti dirà "Troppo basso, prova un<br> numero più scanni!"</li>

                    <li>Se il tuo numero è troppo alto, ti dirà "Troppo alto, prova un numero<br> più basso!"</li>

                    <li>Se indovini il numero esatto, vincerai la partita!</li>

                </ul>

                <ol>
                    <li>Continua a fare tentativi finché non indovini il numero magico.</li>

                    <li>Alla fine del gioco, ti verrà mostrato il numero di tentativi che hai<br> impiegato per indovinare.</li>

                    <li>Sfida te stesso a indovinare il numero con il minor numero di tentativi<br> possibile!</li>
                </ol>
            </div>
        </div>
        <div class="input">
            <div class="elementi">
        <p>Inserisci il numero magico</p>
        <input id="userGuess" type="number" name="user_guess" value=""/>
        <input id="button" type="button" name="guess" value="Indovina">
    </div>
    </div>
        <div class="tentativi">
            <div id="testo1">non hai ancora scritto un numero<br></div>
            <div id="testo2"> Hai ancora <b>5</b> tentativi</div>
        </div>

    </form>
    </div>
    <script type="text/javascript">
         let number
         let i = 5; 
         let indovinato = false;
        let min = 1
        let max = 100
        let imax=5
        let random =0
        let lista =document.querySelector("#listener")
        let testo1 = document.querySelector("#testo1")
        let testo2 = document.querySelector("#testo2")
        random=generateRandomInteger(min,max)
        let button =document.querySelector("#button")
        button.addEventListener("click",function(event){
            if (i >= imax) {
                console.log("Tentativi esauriti, il numero corretto era "+random)
                testo1.innerHTML="Non hai inserito un numero";
                testo2.innerHTML="Inserisci un numero valido";
            }

            number = document.querySelector("#userGuess").value
            number = parseInt(number)
            i -= 1
            if (number < min || number > max || isNaN(number)){
                console.log("Errore inserimento")
                testo1.innerHTML="Non hai inserito un numero";
                return
            }
            
        if(number === random){
        console.log("Hai indovinato!");
        testo1.innerHTML="hai vinto "
        return
    }
    else {
        if(number < random){
            console.log("Numero troppo piccolo, riprova")
            testo1.innerHTML="Numero troppo piccolo, riprova"
            testo2.innerHTML="hai ancora <b>"+ i +"</b> tentativi"
            return
        }
        else{ 
            if (number > random){
            console.log("Numero troppo scanni, riprova")
            testo1.innerHTML="Numero troppo scanni, riprova"
            testo2.innerHTML="hai ancora <b>"+ i +"</b> tentativi"
            return
        }
        }}})
        function sanitize(n) {
            let num = number
            return num.trim()
        }

        function generateRandomInteger(min, max) {
            let n=0
        n = Math.random(min,max)
        n=n*(max-min)  
        n = parseInt(n)+min
        console.log(n)
        return n
        }
        if(i===5){
            tutto.classlist.add("green")
        }elif(i===4);{
            tutto.classlist.remove("green")
            tutto.classlist.add("yellow")
        }elif(i===3);{
            tutto.classlist.remove("yellow")
            tutto.classlist.add("blue")
        }

      

       /* while (i < 5 && !indovinato) {
            let risposta = prompt("Inserisci un numero da 1 a 100");
            risposta = sanitize(risposta);
            
            if (risposta < random) {
                console.log("Troppo piccolo");
            } else if (risposta > random) {
                console.log("Troppo grande");
            } else {
                console.log("Hai vinto!");
                indovinato = true; 
            }
            i++;
        }

        if (i === 5 && !indovinato) {
            console.log("Hai finito i tentativi. Il numero era: " + random);
        }
        */
    </script>
</body>
</html>
